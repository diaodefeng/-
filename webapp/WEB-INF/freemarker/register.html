<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
  <title>饿了吗 - 登录</title>

  <!-- Bootstrap -->
  <link href="../../lib/bootstrap-3.3.7/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/login.css" />
  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="../../lib/html5shiv.min.js"></script>
    <script src="../../lib/respond.min.js"></script>
  <![endif]-->
</head>
<body>

  <div class="container">
    <div class="row">
      <div class="col-md-12">
      	<img src="img/logo.png" class="img-responsive center-block"/>
        <h3 class="text-center text-primary">美好生活&nbsp;触手可得</h3>
        <hr/>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="row">
      <div class="col-md-4 col-md-offset-4">
        <div class="panel panel-default">
          <div class="panel-heading">
            用户注册
          </div>
          <div class="panel-body">
            <form id="login">
              <div class="control-group">
                <label>账号</label><span class="pan1 text-danger"></span>
                <input class="form-control" id="account" type="text" name="account"/>
              </div>
              <p>&nbsp;</p>
              <div class="control-group">
                <label>密码</label><span class="pan2 text-danger"></span>
                <input class="form-control" id="password" type="password" name="password"  maxlength="20"/>
              </div>
              <p>&nbsp;</p>
              <div class="control-group">
                <label>确认密码</label><span class="pan3 text-danger"></span>
                <input class="form-control" id="pd" type="password"  />
              </div>
              <p>&nbsp;</p>
              <a class="btn btn-primary btn-block" id="submit">确认</a>
              <p>&nbsp;</p>
            </form>
            <ul class="list-inline pull-right">
                <li>
                  <a href="register.html" class="pull-right">返回登陆界面</a>
                </li>
              </ul>
          </div>
      </div>
    </div>
  </div>

  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="../../lib/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="../../lib/bootstrap-3.3.7/js/bootstrap.min.js"></script>

  <script type="text/javascript">
  $(function () {
  	$('#account').on('blur',function(){
  		if($('#account').val().length=='' || $('#account').val().length>7){
			$('.pan1').text('用户名不能为空或大于6位')
  		}else{
  			$('.pan1').text('')
  		}
  	})
  	$('#password').on('blur',function(){
  		if($('#password').val().length=='' || $('#password').val().length<10){
			$('.pan2').text('密码不能为空或小于10位')
  		}else{
  			$('.pan2').text('')
  		}
  	})
  	$('#pd').on('blur',function(){
  		vara=$('#pd').val()
		if($('#pd').val() != $('#password').val()){
			$('.pan3').text('两次密码不一致')
		}else{
			$('.pan3').text('')
		}
  	})
    $('#submit').on('click', function () {
      $.ajax({
        url: 'login',
        type: 'post',
        data: $('#login').serialize(),
        dataType: 'json',
        success: function (data) {
          if (data.message == 'ERROR') {
            alert(data.error)
          } else if (data.message == 'OK') {
            window.location.href = 'login.html'
          }
          
        }
      })
    })
  })
  </script>
</body>
</html>
